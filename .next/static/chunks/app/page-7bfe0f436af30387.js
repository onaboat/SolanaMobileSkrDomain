(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5591:function(e,a,t){Promise.resolve().then(t.bind(t,2480))},2480:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return x}});var s=t(7437),n=t(2265);let i=[{value:"3d",label:"Past 3 Days"},{value:"5d",label:"Past 5 Days"},{value:"7d",label:"Past 7 Days"},{value:"10d",label:"Past 10 Days"},{value:"14d",label:"Past 2 Weeks"},{value:"21d",label:"Past 3 Weeks"},{value:"30d",label:"Past Month"},{value:"all",label:"All Time"}];function o(e){let{selectedRange:a,onRangeChange:t}=e;return(0,s.jsx)("div",{className:"filter-presets",children:(0,s.jsx)("div",{className:"filter-buttons",children:i.map(e=>(0,s.jsx)("button",{onClick:()=>t(e.value),className:"filter-button ".concat(a===e.value?"active":""),children:e.label},e.value))})})}var r=t(5253),l=t(3952),c=t(6573),d=t(4235),u=t(39),m=t(6812),h=t(9223);function g(e){let{domains:a,timeRange:t}=e,i=(0,n.useMemo)(()=>{if(0===a.length)return[];let e=Object.entries(a.reduce((e,a)=>{let t=new Date(a.timestamp).toISOString().split("T")[0];return e[t]=(e[t]||0)+1,e},{})).map(e=>{let[a,t]=e;return{date:a,registrations:t,cumulative:0}}).sort((e,a)=>e.date.localeCompare(a.date)),t=0;return e.forEach(e=>{t+=e.registrations,e.cumulative=t}),e},[a]),o=(0,n.useMemo)(()=>0===i.length?[0,100]:[0,Math.ceil(1.1*Math.max(Math.max(...i.map(e=>e.registrations)),Math.max(...i.map(e=>e.cumulative))))],[i]),g=(0,n.useMemo)(()=>({backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"6px",color:"#00ff00"}),[]);return(0,s.jsxs)("div",{className:"growth-chart",children:[(0,s.jsx)("h3",{className:"chart-title",children:"Domain Registration Growth"}),0===i.length?(0,s.jsx)("div",{className:"no-data",children:"No data available for the selected time range"}):(0,s.jsx)("div",{style:{width:"100%",height:"300px"},children:(0,s.jsx)(r.h,{width:"100%",height:"100%",children:(0,s.jsxs)(l.w,{data:i,children:[(0,s.jsx)(c.q,{strokeDasharray:"3 3",stroke:"#333"}),(0,s.jsx)(d.K,{dataKey:"date",tick:{fill:"#00ff00",fontSize:12},axisLine:{stroke:"#333"}}),(0,s.jsx)(u.B,{tick:{fill:"#00ff00",fontSize:12},axisLine:{stroke:"#333"},domain:o,allowDecimals:!1}),(0,s.jsx)(m.u,{contentStyle:g}),(0,s.jsx)(h.x,{dataKey:"registrations",stroke:"#00ff00",strokeWidth:2,dot:{fill:"#00ff00",strokeWidth:2,r:4}}),(0,s.jsx)(h.x,{dataKey:"cumulative",stroke:"#00aa00",strokeWidth:2,dot:{fill:"#00aa00",strokeWidth:2,r:4}})]})})})]})}function p(e){let{domains:a,timeRange:t}=e,i=(0,n.useMemo)(()=>Object.entries(a.reduce((e,a)=>{let t;let s=new Date(a.timestamp).getUTCHours();return e[t=s>=0&&s<6?"Asia-Pacific":s>=6&&s<12?"Europe":s>=12&&s<18?"Americas":"Other"]=(e[t]||0)+1,e},{})).map(e=>{let[a,t]=e;return{region:a,count:t}}).sort((e,a)=>a.count-e.count),[a]);return(0,s.jsxs)("div",{className:"regional-cards",children:[(0,s.jsxs)("h3",{className:"chart-title",children:["Regional Activity ",(0,s.jsx)("span",{className:"explanation-text",children:"calculated based on the UTC timestamp of domain registrations"})]}),(0,s.jsx)("div",{className:"cards-grid",children:i.map(e=>(0,s.jsxs)("div",{className:"regional-card",children:[(0,s.jsx)("div",{className:"card-header",children:(0,s.jsx)("h4",{className:"region-name",children:e.region})}),(0,s.jsx)("div",{className:"card-content",children:(0,s.jsxs)("div",{className:"count",children:[e.count.toLocaleString()," domains"]})})]},e.region))})]})}function x(){let[e,a]=(0,n.useState)([]),[t,i]=(0,n.useState)(!1),[r,l]=(0,n.useState)({totalProcessed:0,domainsFound:0,isConnected:!1}),[c,d]=(0,n.useState)([]),[u,m]=(0,n.useState)(""),[h,x]=(0,n.useState)(""),[C,f]=(0,n.useState)(!1),[j,D]=(0,n.useState)("7d"),[v,w]=(0,n.useState)({page:1,limit:100,total:0,totalPages:0}),[H,N]=(0,n.useState)(!0),b=(0,n.useRef)(!1),L=(0,n.useRef)(null),S=(0,n.useRef)(null),k=(0,n.useRef)(!1),T=(0,n.useMemo)(()=>e.filter(e=>e.name.toLowerCase().includes(u.toLowerCase())),[e,u]),V=async()=>{if(b.current){console.log("\uD83D\uDD04 Already loading domains, skipping...");return}try{var e;b.current=!0,N(!0),console.log("\uD83D\uDD04 Loading domains for timeRange:",j);let t=await fetch("/api/domains?timeRange=".concat(j,"&limit=10000&forChart=true"));if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));let s=await t.json();if(console.log("\uD83D\uDCCA API Response:",{domainsCount:(null===(e=s.domains)||void 0===e?void 0:e.length)||0,pagination:s.pagination,error:s.error}),s.error){console.error("❌ API Error:",s.error);return}a(s.domains||[]),w(s.pagination||{page:1,limit:100,total:0,totalPages:0})}catch(e){console.error("❌ Failed to load domains:",e)}finally{N(!1),b.current=!1}};return(0,n.useEffect)(()=>{if(k.current)return;k.current=!0;let t=()=>{x(new Date().toLocaleTimeString())};return t(),S.current=setInterval(t,1e3),V(),(async()=>{try{console.log("\uD83D\uDE80 Starting domain watcher...");let t=await fetch("/api/websocket?action=start"),s=await t.json();if(s.success){i(!0),l(e=>({...e,isConnected:!0})),console.log("✅ Domain watcher started successfully");let t=new EventSource("/api/websocket");L.current=t,t.onopen=()=>{console.log("\uD83D\uDD0C WebSocket connection opened successfully")},t.onmessage=t=>{console.log("\uD83D\uDCE8 Raw WebSocket message received:",t.data);try{let s=JSON.parse(t.data);if(console.log("\uD83D\uDCE8 Parsed WebSocket message:",s),"newDomain"===s.type){console.log("\uD83C\uDFAF Received new domain:",s.domain.name),console.log("\uD83C\uDFAF Current domains count before update:",e.length),a(e=>{if(e.some(e=>e.signature===s.domain.signature))return console.log("⚠️ Domain already exists in state, skipping:",s.domain.name),e;console.log("✅ Adding new domain to state:",s.domain.name),console.log("✅ New domains count will be:",e.length+1);let a=[s.domain,...e];return console.log("✅ New domains array length:",a.length),a}),f(e=>!e);let t=new Date(s.domain.timestamp),n=new Date,i=!1;switch(j){case"3d":i=n.getTime()-t.getTime()<=2592e5;break;case"5d":i=n.getTime()-t.getTime()<=432e6;break;case"7d":i=n.getTime()-t.getTime()<=6048e5;break;case"10d":i=n.getTime()-t.getTime()<=864e6;break;case"14d":i=n.getTime()-t.getTime()<=12096e5;break;case"21d":i=n.getTime()-t.getTime()<=18144e5;break;case"30d":i=n.getTime()-t.getTime()<=2592e6;break;case"all":i=!0}i&&d(e=>e.some(e=>e.signature===s.domain.signature)?e:[s.domain,...e.slice(0,9)]),setTimeout(()=>{let e=document.querySelector('[data-signature="'.concat(s.domain.signature,'"]'));e&&(e.classList.add("flash-animation"),setTimeout(()=>{e.classList.remove("flash-animation")},2500))},100),f(!0),setTimeout(()=>f(!1),2500),setTimeout(()=>{d(e=>e.filter(e=>e.signature!==s.domain.signature))},5e4)}else"reload"===s.type?(console.log("\uD83D\uDD04 Reloading domains from database..."),b.current||V()):"stats"===s.type&&l(s.stats)}catch(e){console.error("Error parsing SSE data:",e)}},t.onerror=e=>{console.error("❌ WebSocket connection error:",e),l(e=>({...e,isConnected:!1})),setTimeout(()=>{console.log("\uD83D\uDD04 Attempting to reconnect WebSocket..."),L.current&&L.current.close();let e=new EventSource("/api/websocket");L.current=e},5e3)}}else console.error("❌ Failed to start watcher:",s)}catch(e){console.error("❌ Failed to start watcher:",e)}})(),()=>{S.current&&clearInterval(S.current),L.current&&L.current.close(),fetch("/api/websocket?action=stop").catch(console.error)}},[]),(0,n.useEffect)(()=>{V()},[j]),(0,n.useEffect)(()=>{if(e.length>0){let a=e.reduce((e,a)=>{let t=new Date(a.timestamp).toISOString().split("T")[0];return e[t]=(e[t]||0)+1,e},{});console.log("\uD83D\uDCCA Test chart data:",a),console.log("\uD83E\uDDEA Test chart data entries:",Object.entries(a))}},[e]),(0,n.useEffect)(()=>{console.log("\uD83D\uDD04 Domains state updated:",{totalDomains:e.length,newDomainsCount:c.length,filteredDomainsCount:T.length,firstFewDomains:e.slice(0,3).map(e=>e.name)})},[e,c,T]),(0,s.jsxs)("div",{className:"domains-page",children:[(0,s.jsx)("div",{className:"page-header",children:(0,s.jsxs)("div",{className:"header-content",children:[(0,s.jsx)("div",{className:"logo-section",children:(0,s.jsxs)("span",{className:"flex items-center gap-3 md:gap-6",children:[(0,s.jsxs)("svg",{width:"108",height:"18",viewBox:"0 0 108 18",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("path",{d:"M37.2422 0.951172H40.4613V14.2839H48.6236V17.1739H37.2422V0.951172Z"}),(0,s.jsx)("path",{d:"M57.2898 0.951172H63.0684L68.4676 17.1739H65.1466L63.8034 13.143H56.4781L55.1349 17.1739H51.8906L57.2898 0.951172ZM62.8662 10.3562L60.7879 4.12012H59.4699L57.3916 10.3562H62.8662Z"}),(0,s.jsx)("path",{d:"M72.3867 0.951172H77.9128L83.743 13.5991H84.1489V0.951172H87.3179V17.1739H81.7917L75.9364 4.526H75.5557V17.1739H72.3867V0.951172Z"}),(0,s.jsx)("path",{d:"M96.618 0.950928H102.397L107.796 17.1736H104.475L103.132 13.1427H95.8062L94.463 17.1736H91.2188L96.618 0.950928ZM102.194 10.3559L100.116 4.11987H98.798L96.7198 10.3559H102.194Z"}),(0,s.jsx)("path",{d:"M0.00139478 12.1803H3.29587C3.47301 13.6002 4.21084 14.6644 6.78143 14.6644H7.19986C9.6491 14.6644 10.3298 13.8024 10.3298 12.6364C10.3298 11.5722 9.48033 10.812 8.28918 10.6851L4.84129 10.1648C1.39757 9.6934 0.430987 7.46873 0.430987 5.47558C0.430987 2.30664 2.46458 0.571533 6.66705 0.571533C10.8695 0.571533 12.8766 2.3708 13.0287 5.91912H9.75928C9.53472 4.42671 8.94892 3.46012 6.67961 3.46012H6.40065C4.38659 3.46012 3.46045 4.19518 3.46045 5.38632C3.46045 6.57746 4.34753 7.2874 5.46336 7.41433L9.04934 7.93458C12.2964 8.33767 13.3843 10.2946 13.3843 12.5987C13.3843 15.7928 11.6102 17.5544 6.71727 17.5544C2.25536 17.5544 0.076713 15.73 0 12.1803H0.00139478Z"}),(0,s.jsx)("path",{d:"M18.7972 2.84224C20.2869 1.32053 22.2981 0.571533 24.852 0.571533C27.4058 0.571533 29.4171 1.34285 30.883 2.86455C32.3726 4.38626 33.1063 6.45193 33.1063 9.08528C33.1063 11.7186 32.3726 13.7857 30.9067 15.306C29.4408 16.804 27.4295 17.5544 24.852 17.5544C22.2744 17.5544 20.2631 16.8054 18.7972 15.306C17.3313 13.7843 16.5977 11.7186 16.5977 9.08528C16.5977 6.45193 17.3313 4.36255 18.7972 2.84224ZM20.0721 10.1718C20.0721 13.02 21.9522 14.6728 24.8506 14.6728C27.7489 14.6728 29.6068 12.9335 29.6068 10.1718V7.93179C29.6068 5.08365 27.7489 3.45315 24.8506 3.45315C21.9522 3.45315 20.0721 5.21476 20.0721 7.93179V10.1718Z"})]}),(0,s.jsxs)("svg",{width:"29",height:"24",viewBox:"0 0 29 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("path",{d:"M1.00191 24C0.59453 24 0.383573 23.4555 0.667283 23.1318L5.14844 18.2833C5.33031 18.092 5.56309 17.9963 5.81043 17.9963H28.5363C28.9437 17.9963 29.1547 18.5408 28.8709 18.8645L24.3898 23.7131C24.2079 23.9044 23.9751 24 23.7278 24H1.00191Z"}),(0,s.jsx)("path",{d:"M1.00191 6.00368C0.59453 6.00368 0.383573 5.45923 0.667283 5.1355L5.14844 0.286941C5.33031 0.0956468 5.56309 0 5.81043 0H28.5363C28.9437 0 29.1547 0.544451 28.8709 0.868179L24.3898 5.71674C24.2079 5.90803 23.9751 6.00368 23.7278 6.00368H1.00191Z"}),(0,s.jsx)("path",{d:"M23.706 8.94666C23.9606 8.94666 24.1861 9.04231 24.368 9.2336L28.8709 14.0822C29.1547 14.4132 28.9364 14.9503 28.529 14.9503H5.72313C5.46852 14.9503 5.24301 14.8547 5.06114 14.6634L0.558157 9.81484C0.274447 9.48375 0.492686 8.94666 0.900064 8.94666H23.706Z"})]}),(0,s.jsxs)("svg",{width:"101",height:"18",viewBox:"0 0 101 18",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("path",{d:"M59.2852 14.3348H62.4792V3.79028H59.2852V0.951904H68.8924V3.79028H65.6733V14.3348H68.8924V17.1732H59.2852V14.3348Z"}),(0,s.jsx)("path",{d:"M73.5117 0.951172H76.7309V14.2839H84.8931V17.1739H73.5117V0.951172Z"}),(0,s.jsx)("path",{d:"M88.9922 0.951172H100.88V3.68913H92.1862V7.51641H100.247V10.2028H92.1862V14.4359H101.007V17.1739H88.9922V0.951172Z"}),(0,s.jsx)("path",{d:"M12.2484 0.951172L9.38356 13.3968H9.17434H8.96652L6.10164 0.951172H0.144531V17.1739H3.31207L3.15865 4.50089H3.89788L6.81298 17.1739H9.17434H11.5371L14.4522 4.50089H15.1914L15.038 17.1739H18.2056V0.951172H12.2484Z"}),(0,s.jsx)("path",{d:"M52.6604 8.4537V8.35328C54.1807 7.69355 54.9409 6.42569 54.9409 4.93048C54.9409 2.59841 53.2183 0.951172 50.0243 0.951172H42.5469V17.1739H50.4037C53.8767 17.1739 55.6508 15.0692 55.6508 12.5097C55.6508 10.5584 54.5615 9.13854 52.6604 8.4537ZM45.7409 3.48549H50.1596C51.0509 3.48549 51.7733 4.20799 51.7733 5.09925V5.85243C51.7733 6.7437 51.0509 7.4648 50.1596 7.4648H45.7409V3.48549ZM52.4568 12.8724C52.4568 13.8641 51.6534 14.6688 50.6617 14.6688H45.7409V9.9238H50.6617C51.6534 9.9238 52.4568 10.7286 52.4568 11.7203V12.8724Z"}),(0,s.jsx)("path",{d:"M24.1019 2.84224C25.5915 1.32053 27.6028 0.571533 30.1567 0.571533C32.7105 0.571533 34.7218 1.34285 36.1877 2.86455C37.6773 4.38626 38.411 6.45193 38.411 9.08528C38.411 11.7186 37.6773 13.7857 36.2114 15.306C34.7455 16.804 32.7342 17.5544 30.1567 17.5544C27.5791 17.5544 25.5678 16.8054 24.1019 15.306C22.636 13.7843 21.9023 11.7186 21.9023 9.08528C21.9023 6.45193 22.636 4.36255 24.1019 2.84224ZM25.3781 10.1718C25.3781 13.02 27.2583 14.6728 30.1567 14.6728C33.055 14.6728 34.9129 12.9335 34.9129 10.1718V7.93179C34.9129 5.08365 33.055 3.45315 30.1567 3.45315C27.2583 3.45315 25.3781 5.21476 25.3781 7.93179V10.1718Z"})]})]})}),(0,s.jsxs)("div",{className:"header-status",children:[(0,s.jsx)("span",{children:"SYSTEM STATUS: OPERATIONAL"}),(0,s.jsxs)("span",{children:["LAST UPDATE: ",h]}),(0,s.jsx)("span",{children:"VERSION: 2.1.0"}),(0,s.jsx)("span",{className:"status-indicator ".concat(r.isConnected?"connected":"disconnected"," ").concat(C?"flash-animation":""),children:r.isConnected?"●":"○"}),(0,s.jsx)("span",{className:C?"flash-animation":"",children:r.isConnected?"CONNECTED":"DISCONNECTED"})]})]})}),(0,s.jsx)(o,{selectedRange:j,onRangeChange:D}),(0,s.jsx)("div",{className:"filter-status",children:H?(0,s.jsx)("span",{children:"Loading domains..."}):"Showing ".concat(e.length," domains from ").concat("3d"===j?"past 3 days":"5d"===j?"past 5 days":"7d"===j?"past 7 days":"10d"===j?"past 10 days":"14d"===j?"past 14 days":"21d"===j?"past 21 days":"30d"===j?"past 30 days":"all time")}),(0,s.jsx)("div",{className:"charts-container",children:H?(0,s.jsx)("div",{className:"loading-charts",children:(0,s.jsx)("div",{className:"loading-spinner",children:"Loading charts..."})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g,{domains:e,timeRange:j}),(0,s.jsx)(p,{domains:e,timeRange:j})]})}),(0,s.jsxs)("div",{className:"search-container",children:[(0,s.jsx)("div",{className:"search-input-wrapper",children:(0,s.jsx)("input",{type:"text",className:"search-input",placeholder:"Search domain names...",value:u,onChange:e=>m(e.target.value),disabled:H})}),u&&!H&&(0,s.jsxs)("div",{className:"search-results",children:["Found ",T.length," of ",e.length," domains"]})]}),!H&&T.length>0&&(0,s.jsxs)("div",{className:"domain-list-container",children:[(0,s.jsx)("h3",{className:"section-title",children:"All Domains"}),(0,s.jsx)("div",{className:"domain-grid",children:T.slice(0,50).map((e,a)=>(0,s.jsxs)("a",{href:e.owner?"https://solscan.io/account/".concat(e.owner):"https://solscan.io/tx/".concat(e.signature),target:"_blank",rel:"noopener noreferrer",className:"domain-card ".concat(c.some(a=>a.signature===e.signature)?"new":""),"data-signature":e.signature,children:[(0,s.jsx)("div",{className:"domain-name",children:e.name}),(0,s.jsx)("div",{className:"domain-meta",children:e.blockTime?new Date(1e3*e.blockTime).toLocaleString():new Date(e.timestamp).toLocaleString()}),(0,s.jsx)("div",{className:"domain-signature",children:e.owner?"".concat(e.owner.slice(0,8),"...").concat(e.owner.slice(-8)):"".concat(e.signature.slice(0,8),"...").concat(e.signature.slice(-8))}),c.some(a=>a.signature===e.signature)&&(0,s.jsx)("div",{className:"new-badge",children:"NEW"})]},e.signature))}),T.length>50&&(0,s.jsxs)("div",{className:"more-domains-indicator",children:["Showing first 50 of ",T.length," domains"]})]})]})}}},function(e){e.O(0,[155,971,938,744],function(){return e(e.s=5591)}),_N_E=e.O()}]);